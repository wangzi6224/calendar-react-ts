{"version":3,"file":"index.js","names":["CalendarHeader","businessRender","useContext","GlobalData","targetDay","setTargetDay","switchWeekendDay","setSwitchWeekendDay","useState","dateTextList","setDateTextList","currTime","setCurrTime","useEffect","calcWeekDayList","params","result","i","weekDay","unshift","push","onChangeWeek","type","switchWay","calcWeekTime","style","Calendar_Header","value","Calendar_Header_Zone","Calendar_Header_businessRender"],"sources":["../../../src/components/CalendarHeader/index.tsx"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport style from './index.less';\r\nimport DailyOptions from '@/components/CalendarHeader/components/DailyOptions';\r\nimport WeeklyOptions from '@/components/CalendarHeader/components/WeeklyOptions';\r\nimport { weekDay } from '@/utils';\r\nimport type { WeekType, CalendarHeaderType } from '@/data.d';\r\nimport {GlobalData} from \"@/components/Container\";\r\n\r\nconst CalendarHeader: React.FC<CalendarHeaderType> = ({\r\n  businessRender,\r\n}) => {\r\n  const {targetDay, setTargetDay, switchWeekendDay, setSwitchWeekendDay} = useContext(GlobalData);\r\n  const [dateTextList, setDateTextList] = useState<WeekType | []>([]);\r\n  const [currTime, setCurrTime] = useState<number>(targetDay);\r\n\r\n  useEffect(() => {\r\n    setDateTextList(calcWeekDayList(targetDay));\r\n  }, [targetDay]);\r\n\r\n  const calcWeekDayList: (params: number) => WeekType = (params) => {\r\n    const result = [];\r\n    for (let i = 1; i < weekDay(params); i++) {\r\n      result.unshift(params - 3600 * 1000 * 24 * i);\r\n    }\r\n    for (let i = 0; i < 7 - weekDay(params) + 1; i++) {\r\n      result.push(params + 3600 * 1000 * 24 * i);\r\n    }\r\n    return [...result] as WeekType;\r\n  };\r\n\r\n  const onChangeWeek: (type: 'prevWeek' | 'nextWeek', switchWay: 'week' | 'day') => void = (\r\n    type,\r\n    switchWay,\r\n  ) => {\r\n    if (switchWay === 'week') {\r\n      const calcWeekTime =\r\n        type === 'prevWeek' ? currTime - 3600 * 1000 * 24 * 7 : currTime + 3600 * 1000 * 24 * 7;\r\n      setCurrTime(calcWeekTime);\r\n      setDateTextList([...calcWeekDayList(calcWeekTime)]);\r\n    }\r\n\r\n    if (switchWay === 'day') {\r\n      const calcWeekTime =\r\n        type === 'prevWeek' ? targetDay - 3600 * 1000 * 24 : targetDay + 3600 * 1000 * 24;\r\n      setCurrTime(calcWeekTime);\r\n      setTargetDay(calcWeekTime);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={style.Calendar_Header}>\r\n      <DailyOptions\r\n        setCurrTime={setCurrTime}\r\n        dateTextList={dateTextList}\r\n        setSwitchWeekendDay={(value) => {\r\n          setSwitchWeekendDay(value);\r\n          if (value === 'week') {\r\n            setDateTextList(calcWeekDayList(targetDay));\r\n          }\r\n        }}\r\n        onChangeWeek={(type) => onChangeWeek(type, switchWeekendDay)}\r\n      />\r\n      {switchWeekendDay === 'week' && (\r\n        <WeeklyOptions\r\n          dateTextList={dateTextList}\r\n        />\r\n      )}\r\n      <div className={style.Calendar_Header_Zone}>GMT+8</div>\r\n      <div className={style.Calendar_Header_businessRender}>\r\n        {businessRender(targetDay)}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CalendarHeader;\r\n"],"mappings":"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"}