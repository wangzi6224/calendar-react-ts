{"version":3,"file":"index.js","names":["React","useContext","useEffect","useState","style","DailyOptions","WeeklyOptions","weekDay","GlobalData","CalendarHeader","businessRender","targetDay","setTargetDay","switchWeekendDay","setSwitchWeekendDay","dateTextList","setDateTextList","currTime","setCurrTime","calcWeekDayList","params","result","i","unshift","push","onChangeWeek","type","switchWay","calcWeekTime","Calendar_Header","value","Calendar_Header_Zone","Calendar_Header_businessRender"],"sources":["../../../src/components/CalendarHeader/index.tsx"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport style from './index.less';\nimport DailyOptions from '@/components/CalendarHeader/components/DailyOptions';\nimport WeeklyOptions from '@/components/CalendarHeader/components/WeeklyOptions';\nimport { weekDay } from '@/utils';\nimport type { WeekType, CalendarHeaderType } from '@/data.d';\nimport {GlobalData} from \"@/components/Container\";\n\nconst CalendarHeader: React.FC<CalendarHeaderType> = ({\n  businessRender,\n}) => {\n  const {targetDay, setTargetDay, switchWeekendDay, setSwitchWeekendDay} = useContext(GlobalData);\n  const [dateTextList, setDateTextList] = useState<WeekType | []>([]);\n  const [currTime, setCurrTime] = useState<number>(targetDay);\n\n  useEffect(() => {\n    setDateTextList(calcWeekDayList(targetDay));\n  }, [targetDay]);\n\n  const calcWeekDayList: (params: number) => WeekType = (params) => {\n    const result = [];\n    for (let i = 1; i < weekDay(params); i++) {\n      result.unshift(params - 3600 * 1000 * 24 * i);\n    }\n    for (let i = 0; i < 7 - weekDay(params) + 1; i++) {\n      result.push(params + 3600 * 1000 * 24 * i);\n    }\n    return [...result] as WeekType;\n  };\n\n  const onChangeWeek: (type: 'prevWeek' | 'nextWeek', switchWay: 'week' | 'day') => void = (\n    type,\n    switchWay,\n  ) => {\n    if (switchWay === 'week') {\n      const calcWeekTime =\n        type === 'prevWeek' ? currTime - 3600 * 1000 * 24 * 7 : currTime + 3600 * 1000 * 24 * 7;\n      setCurrTime(calcWeekTime);\n      setDateTextList([...calcWeekDayList(calcWeekTime)]);\n    }\n\n    if (switchWay === 'day') {\n      const calcWeekTime =\n        type === 'prevWeek' ? targetDay - 3600 * 1000 * 24 : targetDay + 3600 * 1000 * 24;\n      setCurrTime(calcWeekTime);\n      setTargetDay(calcWeekTime);\n    }\n  };\n\n  return (\n    <div className={style.Calendar_Header}>\n      <DailyOptions\n        setCurrTime={setCurrTime}\n        dateTextList={dateTextList}\n        setSwitchWeekendDay={(value) => {\n          setSwitchWeekendDay(value);\n          if (value === 'week') {\n            setDateTextList(calcWeekDayList(targetDay));\n          }\n        }}\n        onChangeWeek={(type) => onChangeWeek(type, switchWeekendDay)}\n      />\n      {switchWeekendDay === 'week' && (\n        <WeeklyOptions\n          dateTextList={dateTextList}\n        />\n      )}\n      <div className={style.Calendar_Header_Zone}>GMT+8</div>\n      <div className={style.Calendar_Header_businessRender}>\n        {businessRender(targetDay)}\n      </div>\n    </div>\n  );\n};\n\nexport default CalendarHeader;\n"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,OAAOC,KAAP;AACA,OAAOC,YAAP;AACA,OAAOC,aAAP;AACA,SAASC,OAAT;AAEA,SAAQC,UAAR;;AAEA,IAAMC,cAA4C,GAAG,SAA/CA,cAA+C,OAE/C;EAAA,IADJC,cACI,QADJA,cACI;;EACJ,kBAAyET,UAAU,CAACO,UAAD,CAAnF;EAAA,IAAOG,SAAP,eAAOA,SAAP;EAAA,IAAkBC,YAAlB,eAAkBA,YAAlB;EAAA,IAAgCC,gBAAhC,eAAgCA,gBAAhC;EAAA,IAAkDC,oBAAlD,eAAkDA,mBAAlD;;EACA,gBAAwCX,QAAQ,CAAgB,EAAhB,CAAhD;EAAA,IAAOY,YAAP;EAAA,IAAqBC,eAArB;;EACA,iBAAgCb,QAAQ,CAASQ,SAAT,CAAxC;EAAA,IAAOM,QAAP;EAAA,IAAiBC,WAAjB;;EAEAhB,SAAS,CAAC,YAAM;IACdc,eAAe,CAACG,eAAe,CAACR,SAAD,CAAhB,CAAf;EACD,CAFQ,EAEN,CAACA,SAAD,CAFM,CAAT;;EAIA,IAAMQ,eAA6C,GAAG,SAAhDA,eAAgD,CAACC,MAAD,EAAY;IAChE,IAAMC,MAAM,GAAG,EAAf;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGf,OAAO,CAACa,MAAD,CAA3B,EAAqCE,CAAC,EAAtC,EAA0C;MACxCD,MAAM,CAACE,OAAP,CAAeH,MAAM,GAAG,OAAO,IAAP,GAAc,EAAd,GAAmBE,CAA3C;IACD;;IACD,KAAK,IAAIA,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG,IAAIf,OAAO,CAACa,MAAD,CAAX,GAAsB,CAA1C,EAA6CE,EAAC,EAA9C,EAAkD;MAChDD,MAAM,CAACG,IAAP,CAAYJ,MAAM,GAAG,OAAO,IAAP,GAAc,EAAd,GAAmBE,EAAxC;IACD;;IACD,iBAAWD,MAAX;EACD,CATD;;EAWA,IAAMI,aAAgF,GAAG,SAAnFA,YAAmF,CACvFC,IADuF,EAEvFC,SAFuF,EAGpF;IACH,IAAIA,SAAS,KAAK,MAAlB,EAA0B;MACxB,IAAMC,YAAY,GAChBF,IAAI,KAAK,UAAT,GAAsBT,QAAQ,GAAG,OAAO,IAAP,GAAc,EAAd,GAAmB,CAApD,GAAwDA,QAAQ,GAAG,OAAO,IAAP,GAAc,EAAd,GAAmB,CADxF;MAEAC,WAAW,CAACU,YAAD,CAAX;MACAZ,eAAe,WAAKG,eAAe,CAACS,YAAD,CAApB,EAAf;IACD;;IAED,IAAID,SAAS,KAAK,KAAlB,EAAyB;MACvB,IAAMC,aAAY,GAChBF,IAAI,KAAK,UAAT,GAAsBf,SAAS,GAAG,OAAO,IAAP,GAAc,EAAhD,GAAqDA,SAAS,GAAG,OAAO,IAAP,GAAc,EADjF;;MAEAO,WAAW,CAACU,aAAD,CAAX;MACAhB,YAAY,CAACgB,aAAD,CAAZ;IACD;EACF,CAjBD;;EAmBA,oBACE;IAAK,SAAS,EAAExB,KAAK,CAACyB;EAAtB,gBACE,oBAAC,YAAD;IACE,WAAW,EAAEX,WADf;IAEE,YAAY,EAAEH,YAFhB;IAGE,mBAAmB,EAAE,6BAACe,KAAD,EAAW;MAC9BhB,oBAAmB,CAACgB,KAAD,CAAnB;;MACA,IAAIA,KAAK,KAAK,MAAd,EAAsB;QACpBd,eAAe,CAACG,eAAe,CAACR,SAAD,CAAhB,CAAf;MACD;IACF,CARH;IASE,YAAY,EAAE,sBAACe,IAAD;MAAA,OAAUD,aAAY,CAACC,IAAD,EAAOb,gBAAP,CAAtB;IAAA;EAThB,EADF,EAYGA,gBAAgB,KAAK,MAArB,iBACC,oBAAC,aAAD;IACE,YAAY,EAAEE;EADhB,EAbJ,eAiBE;IAAK,SAAS,EAAEX,KAAK,CAAC2B;EAAtB,WAjBF,eAkBE;IAAK,SAAS,EAAE3B,KAAK,CAAC4B;EAAtB,GACGtB,cAAc,CAACC,SAAD,CADjB,CAlBF,CADF;AAwBD,CAjED;;AAmEA,eAAeF,cAAf"}