{"version":3,"file":"index.js","names":["style","React","createContext","useState","CalendarHeader","ScheduleContainer","GlobalData","Container","initDay","onChange","scheduleRender","businessRender","data","height","mode","onSlideChange","isDraggable","rangeStartAndEndKey","targetDay","setTargetDay","scheduleData","setScheduleData","switchWeekendDay","setSwitchWeekendDay","setTargetDayHandle","timestamp","changeScheduleDataHandle","currTimestamp","map","item","id","startTime","endTime","Calendar_Container"],"sources":["../../../src/components/Container/index.tsx"],"sourcesContent":["import style from './index.less';\nimport React, {createContext, useState} from 'react';\nimport CalendarHeader from '@/components/CalendarHeader';\nimport ScheduleContainer from '@/components/ScheduleContainer';\nimport type {ContainerType, dataType, timestampRange} from '@/data.d';\n\nexport const GlobalData = createContext<{\n  targetDay: number;\n  switchWeekendDay: 'day' | 'week';\n  setTargetDay: (timestamp: number) => void;\n  setSwitchWeekendDay: React.Dispatch<'day' | 'week'>;\n  height: number;\n  isDraggable: boolean;\n  changeScheduleDataHandle: (currTimestamp: timestampRange, data: dataType) => void;\n}>(null)\n\nconst Container: React.FC<ContainerType> = ({\n  initDay,\n  onChange,\n  scheduleRender,\n  businessRender,\n  data,\n  height = 560,\n  mode = 'day',\n  onSlideChange,\n  isDraggable,\n  rangeStartAndEndKey,\n}) => {\n  // 当前选择日期时间戳\n  const [targetDay, setTargetDay] = useState<number>(initDay);\n  // 日程数据\n  const [scheduleData, setScheduleData] = useState<dataType[]>(data);\n  // 切换日和周\n  const [switchWeekendDay, setSwitchWeekendDay] = useState<'day' | 'week'>(mode);\n\n  const setTargetDayHandle = timestamp => {\n    onChange(timestamp);\n    setTargetDay(timestamp);\n  }\n\n  const changeScheduleDataHandle = (currTimestamp: timestampRange, data: dataType) => {\n    setScheduleData(\n      scheduleData.map((item) => {\n        if (item.id === data.id) {\n          return {\n            ...item,\n            startTime: currTimestamp[0],\n            endTime: currTimestamp[1],\n          };\n        }\n        return item;\n      }),\n    );\n    onSlideChange(currTimestamp, data)\n  }\n\n  return (\n    <GlobalData.Provider value={{\n      isDraggable,\n      height,\n      targetDay,\n      switchWeekendDay,\n      setSwitchWeekendDay,\n      changeScheduleDataHandle,\n      setTargetDay: setTargetDayHandle\n    }}>\n      <div className={style.Calendar_Container}>\n        <CalendarHeader businessRender={businessRender}/>\n        <ScheduleContainer\n          data={scheduleData}\n          scheduleRender={scheduleRender}\n          rangeStartAndEndKey={rangeStartAndEndKey}\n        />\n      </div>\n    </GlobalData.Provider>\n  );\n};\n\nexport default Container;\n"],"mappings":";AAAA,OAAOA,KAAP;AACA,OAAOC,KAAP,IAAeC,aAAf,EAA8BC,QAA9B,QAA6C,OAA7C;AACA,OAAOC,cAAP;AACA,OAAOC,iBAAP;AAGA,OAAO,IAAMC,UAAU,gBAAGJ,aAAa,CAQpC,IARoC,CAAhC;;AAUP,IAAMK,SAAkC,GAAG,SAArCA,SAAqC,OAWrC;EAAA,IAVJC,OAUI,QAVJA,OAUI;EAAA,IATJC,QASI,QATJA,QASI;EAAA,IARJC,cAQI,QARJA,cAQI;EAAA,IAPJC,cAOI,QAPJA,cAOI;EAAA,IANJC,IAMI,QANJA,IAMI;EAAA,uBALJC,MAKI;EAAA,IALJA,MAKI,4BALK,GAKL;EAAA,qBAJJC,IAII;EAAA,IAJJA,IAII,0BAJG,KAIH;EAAA,IAHJC,aAGI,QAHJA,aAGI;EAAA,IAFJC,WAEI,QAFJA,WAEI;EAAA,IADJC,mBACI,QADJA,mBACI;;EACJ;EACA,gBAAkCd,QAAQ,CAASK,OAAT,CAA1C;EAAA,IAAOU,SAAP;EAAA,IAAkBC,YAAlB,gBAFI,CAGJ;;;EACA,iBAAwChB,QAAQ,CAAaS,IAAb,CAAhD;EAAA,IAAOQ,YAAP;EAAA,IAAqBC,eAArB,iBAJI,CAKJ;;;EACA,iBAAgDlB,QAAQ,CAAiBW,IAAjB,CAAxD;EAAA,IAAOQ,gBAAP;EAAA,IAAyBC,mBAAzB;;EAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,SAAS,EAAI;IACtChB,QAAQ,CAACgB,SAAD,CAAR;IACAN,YAAY,CAACM,SAAD,CAAZ;EACD,CAHD;;EAKA,IAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,aAAD,EAAgCf,IAAhC,EAAmD;IAClFS,eAAe,CACbD,YAAY,CAACQ,GAAb,CAAiB,UAACC,IAAD,EAAU;MACzB,IAAIA,IAAI,CAACC,EAAL,KAAYlB,IAAI,CAACkB,EAArB,EAAyB;QACvB,oBACKD,IADL;UAEEE,SAAS,EAAEJ,aAAa,CAAC,CAAD,CAF1B;UAGEK,OAAO,EAAEL,aAAa,CAAC,CAAD;QAHxB;MAKD;;MACD,OAAOE,IAAP;IACD,CATD,CADa,CAAf;IAYAd,aAAa,CAACY,aAAD,EAAgBf,IAAhB,CAAb;EACD,CAdD;;EAgBA,oBACE,oBAAC,UAAD,CAAY,QAAZ;IAAqB,KAAK,EAAE;MAC1BI,WAAW,EAAXA,WAD0B;MAE1BH,MAAM,EAANA,MAF0B;MAG1BK,SAAS,EAATA,SAH0B;MAI1BI,gBAAgB,EAAhBA,gBAJ0B;MAK1BC,mBAAmB,EAAnBA,mBAL0B;MAM1BG,wBAAwB,EAAxBA,wBAN0B;MAO1BP,YAAY,EAAEK;IAPY;EAA5B,gBASE;IAAK,SAAS,EAAExB,KAAK,CAACiC;EAAtB,gBACE,oBAAC,cAAD;IAAgB,cAAc,EAAEtB;EAAhC,EADF,eAEE,oBAAC,iBAAD;IACE,IAAI,EAAES,YADR;IAEE,cAAc,EAAEV,cAFlB;IAGE,mBAAmB,EAAEO;EAHvB,EAFF,CATF,CADF;AAoBD,CA5DD;;AA8DA,eAAeV,SAAf"}