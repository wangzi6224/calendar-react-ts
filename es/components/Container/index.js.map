{"version":3,"file":"index.js","names":["style","React","createContext","useState","CalendarHeader","ScheduleContainer","GlobalData","Container","initDay","onChange","scheduleRender","businessRender","data","height","mode","onSlideChange","isDraggable","rangeStartAndEndKey","targetDay","setTargetDay","scheduleData","setScheduleData","switchWeekendDay","setSwitchWeekendDay","setTargetDayHandle","timestamp","changeScheduleDataHandle","currTimestamp","map","item","id","startTime","endTime","WT_Calendar_Container"],"sources":["../../../src/components/Container/index.tsx"],"sourcesContent":["import style from './index.less';\r\nimport React, {createContext, useState} from 'react';\r\nimport CalendarHeader from '@/components/CalendarHeader';\r\nimport ScheduleContainer from '@/components/ScheduleContainer';\r\nimport type {ContainerType, dataType, timestampRange} from '@/data.d';\r\n\r\nexport const GlobalData = createContext<{\r\n  targetDay: number;\r\n  switchWeekendDay: 'day' | 'week';\r\n  setTargetDay: (timestamp: number) => void;\r\n  setSwitchWeekendDay: React.Dispatch<'day' | 'week'>;\r\n  height: number;\r\n  isDraggable: boolean;\r\n  changeScheduleDataHandle: (currTimestamp: timestampRange, data: dataType) => void;\r\n}>(null)\r\n\r\nconst Container: React.FC<ContainerType> = ({\r\n  initDay,\r\n  onChange,\r\n  scheduleRender,\r\n  businessRender,\r\n  data,\r\n  height = 560,\r\n  mode = 'day',\r\n  onSlideChange,\r\n  isDraggable,\r\n  rangeStartAndEndKey,\r\n}) => {\r\n  // 当前选择日期时间戳\r\n  const [targetDay, setTargetDay] = useState<number>(initDay);\r\n  // 日程数据\r\n  const [scheduleData, setScheduleData] = useState<dataType[]>(data);\r\n  // 切换日和周\r\n  const [switchWeekendDay, setSwitchWeekendDay] = useState<'day' | 'week'>(mode);\r\n\r\n  const setTargetDayHandle = timestamp => {\r\n    onChange(timestamp);\r\n    setTargetDay(timestamp);\r\n  }\r\n\r\n  const changeScheduleDataHandle = (currTimestamp: timestampRange, data: dataType) => {\r\n    setScheduleData(\r\n      scheduleData.map((item) => {\r\n        if (item.id === data.id) {\r\n          return {\r\n            ...item,\r\n            startTime: currTimestamp[0],\r\n            endTime: currTimestamp[1],\r\n          };\r\n        }\r\n        return item;\r\n      }),\r\n    );\r\n  }\r\n\r\n  return (\r\n    <GlobalData.Provider value={{\r\n      isDraggable,\r\n      height,\r\n      targetDay,\r\n      switchWeekendDay,\r\n      setSwitchWeekendDay,\r\n      changeScheduleDataHandle,\r\n      setTargetDay: setTargetDayHandle\r\n    }}>\r\n      <div className={style.WT_Calendar_Container}>\r\n        <CalendarHeader businessRender={businessRender}/>\r\n        <ScheduleContainer\r\n          data={scheduleData}\r\n          scheduleRender={scheduleRender}\r\n          rangeStartAndEndKey={rangeStartAndEndKey}\r\n        />\r\n      </div>\r\n    </GlobalData.Provider>\r\n  );\r\n};\r\n\r\nexport default Container;\r\n"],"mappings":";AAAA,OAAOA,KAAP;AACA,OAAOC,KAAP,IAAeC,aAAf,EAA8BC,QAA9B,QAA6C,OAA7C;AACA,OAAOC,cAAP;AACA,OAAOC,iBAAP;AAGA,OAAO,IAAMC,UAAU,gBAAGJ,aAAa,CAQpC,IARoC,CAAhC;;AAUP,IAAMK,SAAkC,GAAG,SAArCA,SAAqC,OAWrC;EAAA,IAVJC,OAUI,QAVJA,OAUI;EAAA,IATJC,QASI,QATJA,QASI;EAAA,IARJC,cAQI,QARJA,cAQI;EAAA,IAPJC,cAOI,QAPJA,cAOI;EAAA,IANJC,IAMI,QANJA,IAMI;EAAA,uBALJC,MAKI;EAAA,IALJA,MAKI,4BALK,GAKL;EAAA,qBAJJC,IAII;EAAA,IAJJA,IAII,0BAJG,KAIH;EAAA,IAHJC,aAGI,QAHJA,aAGI;EAAA,IAFJC,WAEI,QAFJA,WAEI;EAAA,IADJC,mBACI,QADJA,mBACI;;EACJ;EACA,gBAAkCd,QAAQ,CAASK,OAAT,CAA1C;EAAA,IAAOU,SAAP;EAAA,IAAkBC,YAAlB,gBAFI,CAGJ;;;EACA,iBAAwChB,QAAQ,CAAaS,IAAb,CAAhD;EAAA,IAAOQ,YAAP;EAAA,IAAqBC,eAArB,iBAJI,CAKJ;;;EACA,iBAAgDlB,QAAQ,CAAiBW,IAAjB,CAAxD;EAAA,IAAOQ,gBAAP;EAAA,IAAyBC,mBAAzB;;EAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,SAAS,EAAI;IACtChB,QAAQ,CAACgB,SAAD,CAAR;IACAN,YAAY,CAACM,SAAD,CAAZ;EACD,CAHD;;EAKA,IAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,aAAD,EAAgCf,IAAhC,EAAmD;IAClFS,eAAe,CACbD,YAAY,CAACQ,GAAb,CAAiB,UAACC,IAAD,EAAU;MACzB,IAAIA,IAAI,CAACC,EAAL,KAAYlB,IAAI,CAACkB,EAArB,EAAyB;QACvB,oBACKD,IADL;UAEEE,SAAS,EAAEJ,aAAa,CAAC,CAAD,CAF1B;UAGEK,OAAO,EAAEL,aAAa,CAAC,CAAD;QAHxB;MAKD;;MACD,OAAOE,IAAP;IACD,CATD,CADa,CAAf;EAYD,CAbD;;EAeA,oBACE,oBAAC,UAAD,CAAY,QAAZ;IAAqB,KAAK,EAAE;MAC1Bb,WAAW,EAAXA,WAD0B;MAE1BH,MAAM,EAANA,MAF0B;MAG1BK,SAAS,EAATA,SAH0B;MAI1BI,gBAAgB,EAAhBA,gBAJ0B;MAK1BC,mBAAmB,EAAnBA,mBAL0B;MAM1BG,wBAAwB,EAAxBA,wBAN0B;MAO1BP,YAAY,EAAEK;IAPY;EAA5B,gBASE;IAAK,SAAS,EAAExB,KAAK,CAACiC;EAAtB,gBACE,oBAAC,cAAD;IAAgB,cAAc,EAAEtB;EAAhC,EADF,eAEE,oBAAC,iBAAD;IACE,IAAI,EAAES,YADR;IAEE,cAAc,EAAEV,cAFlB;IAGE,mBAAmB,EAAEO;EAHvB,EAFF,CATF,CADF;AAoBD,CA3DD;;AA6DA,eAAeV,SAAf"}